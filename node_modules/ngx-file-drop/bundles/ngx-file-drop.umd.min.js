!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],e):e(t["ngx-file-drop"]={},t.ng.core)}(this,function(t,e){"use strict";function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(){try{return f.apply(this,arguments)}catch(t){return v.errorObject.e=t,v.errorObject}}function i(t){return t.reduce(function(t,e){return t.concat(e instanceof m.UnsubscriptionError?e.errors:e)},[])}function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:j.noop}var s="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c={isArray:Array.isArray||function(t){return t&&"number"==typeof t.length}},u={isNumeric:function(t){return!c.isArray(t)&&t-parseFloat(t)+1>=0}},a="undefined"!=typeof window&&window,h="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,p=a||void 0!==s&&s||h,l=p;!function(){if(!p)throw new Error("RxJS could not find any global context (window, self, global)")}();var f,b={root:l},d={isFunction:function(t){return"function"==typeof t}},y={isObject:function(t){return null!=t&&"object"==typeof t}},v={errorObject:{e:{}}},w={tryCatch:function(t){return f=t,n}},_=s&&s.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},m={UnsubscriptionError:function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return _(e,t),e}(Error)},g={Subscription:function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,o=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,a=n?n.length:0;r;)r.remove(this),r=++u<a&&n[u]||null;if(d.isFunction(o)){(p=w.tryCatch(o).call(this))===v.errorObject&&(e=!0,t=t||(v.errorObject.e instanceof m.UnsubscriptionError?i(v.errorObject.e.errors):[v.errorObject.e]))}if(c.isArray(s))for(u=-1,a=s.length;++u<a;){var h=s[u];if(y.isObject(h)){var p=w.tryCatch(h.unsubscribe).call(h);if(p===v.errorObject){e=!0,t=t||[];var l=v.errorObject.e;l instanceof m.UnsubscriptionError?t=t.concat(i(l.errors)):t.push(l)}}}if(e)throw new m.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}()},x={empty:{closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},S=r(function(t,e){var r=b.root.Symbol;e.rxSubscriber="function"==typeof r&&"function"==typeof r["for"]?r["for"]("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber}),E=(S.rxSubscriber,S.$$rxSubscriber,s&&s.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O=function(t){function e(r,n,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=x.empty;break;case 1:if(!r){this.destination=x.empty;break}if("object"==typeof r){r instanceof e?(this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new A(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new A(this,r,n,i)}}return E(e,t),e.prototype[S.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(g.Subscription),T=O,A=function(t){function e(e,r,n,i){t.call(this),this._parentSubscriber=e;var o,s=this;d.isFunction(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==x.empty&&(s=Object.create(r),d.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}return E(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(r){throw this.unsubscribe(),r}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(n){return t.syncErrorValue=n,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(O),k={Subscriber:T},F={toSubscriber:function(t,e,r){if(t){if(t instanceof k.Subscriber)return t;if(t[S.rxSubscriber])return t[S.rxSubscriber]()}return t||e||r?new k.Subscriber(t,e,r):new k.Subscriber(x.empty)}},P=r(function(t,e){function r(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=r,e.observable=r(b.root),e.$$observable=e.observable}),j=(P.getSymbolObservable,P.observable,P.$$observable,{noop:function(){}}),D={pipe:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)},pipeFromArray:o},U={Observable:function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=F.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(b.root.Rx&&b.root.Rx.config&&b.root.Rx.config.Promise?e=b.root.Rx.config.Promise:b.root.Promise&&(e=b.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var i;i=r.subscribe(function(e){if(i)try{t(e)}catch(r){n(r),i.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[P.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:D.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(b.root.Rx&&b.root.Rx.config&&b.root.Rx.config.Promise?t=b.root.Rx.config.Promise:b.root.Promise&&(t=b.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}()},R=s&&s.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},$={Action:function(t){function e(e,r){t.call(this)}return R(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(g.Subscription)},I=s&&s.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},N={AsyncAction:function(t){function e(e,r){t.call(this,e,r),this.scheduler=e,this.work=r,this.pending=!1}return I(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),b.root.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){return void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending?e:b.root.clearInterval(e)&&undefined||undefined},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=undefined;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}($.Action)},z={Scheduler:function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()},G=s&&s.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},M={async:new({AsyncScheduler:function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=undefined}return G(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(z.Scheduler)}.AsyncScheduler)(N.AsyncAction)},C={isScheduler:function(t){return t&&"function"==typeof t.schedule}},L={isDate:function(t){return t instanceof Date&&!isNaN(+t)}},Q=s&&s.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},V=function(t){function e(e,r,n){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,u.isNumeric(r)?this.period=Number(r)<1&&1||Number(r):C.isScheduler(r)&&(n=r),C.isScheduler(n)||(n=M.async),this.scheduler=n,this.dueTime=L.isDate(e)?+e-this.scheduler.now():e}return Q(e,t),e.create=function(t,r,n){return void 0===t&&(t=0),new e(t,r,n)},e.dispatch=function(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}},e.prototype._subscribe=function(t){var r=this.period,n=this.dueTime;return this.scheduler.schedule(e.dispatch,n,{index:0,period:r,subscriber:t})},e}(U.Observable),q=function(){return function(t,e){this.relativePath=t,this.fileEntry=e}}(),Y=function(){return function(t){this.files=t}}(),W=function(){function t(t){this.zone=t,this.headertext="",this.customstyle=null,this.onFileDrop=new e.EventEmitter,this.onFileOver=new e.EventEmitter,this.onFileLeave=new e.EventEmitter,this.stack=[],this.files=[],this.dragoverflag=!1,this.customstyle||(this.customstyle="drop-zone")}return t.prototype.onDragOver=function(t){this.dragoverflag||(this.dragoverflag=!0,this.onFileOver.emit(t)),this.preventAndStop(t)},t.prototype.onDragLeave=function(t){this.dragoverflag&&(this.dragoverflag=!1,this.onFileLeave.emit(t)),this.preventAndStop(t)},t.prototype.dropFiles=function(t){var e=this;this.dragoverflag=!1,t.dataTransfer.dropEffect="copy";var r;r=t.dataTransfer.items?t.dataTransfer.items.length:t.dataTransfer.files.length;for(var n=0;n<r;n++){var i=void 0;if(t.dataTransfer.items?t.dataTransfer.items[n].webkitGetAsEntry&&(i=t.dataTransfer.items[n].webkitGetAsEntry()):t.dataTransfer.files[n].webkitGetAsEntry&&(i=t.dataTransfer.files[n].webkitGetAsEntry()),i)if(i.isFile){s=new q(i.name,i);this.addToQueue(s)}else i.isDirectory&&this.traverseFileTree(i,i.name);else{var o=t.dataTransfer.files[n];if(o){i={name:o.name,resultFile:o,file:function(t){t(this.resultFile)}};var s=new q(i.name,i);this.addToQueue(s)}}}this.preventAndStop(t);var c=V.create(200,200);this.subscription=c.subscribe(function(t){0===e.stack.length&&(e.onFileDrop.emit(new Y(e.files)),e.files=[],e.subscription.unsubscribe())})},t.prototype.traverseFileTree=function(t,e){var r=this;if(t.isFile){var n=new q(e,t);this.files.push(n),this.zone.run(function(){r.popToStack()})}else{this.pushToStack(e),e+="/";var i=t.createReader(),o=[],s=this,c=function(){i.readEntries(function(r){if(r.length)o=o.concat(r),c();else{if(0===o.length){var n=new q(e,t);s.zone.run(function(){s.addToQueue(n)})}else for(var i=function(t){s.zone.run(function(){s.traverseFileTree(o[t],e+o[t].name)})},u=0;u<o.length;u++)i(u);s.zone.run(function(){s.popToStack()})}})};c()}},t.prototype.addToQueue=function(t){this.files.push(t)},t.prototype.pushToStack=function(t){this.stack.push(t)},t.prototype.popToStack=function(){this.stack.pop()},t.prototype.clearQueue=function(){this.files=[]},t.prototype.preventAndStop=function(t){t.stopPropagation(),t.preventDefault()},t.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},t}();W.decorators=[{type:e.Component,args:[{selector:"file-drop",template:'\n    <div id="dropZone"  [className]="customstyle" [class.over]="dragoverflag"\n        (drop)="dropFiles($event)"\n        (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)">\n        <div class="content">\n            <ng-content></ng-content>\n            {{headertext}}\n        </div>\n    </div>\n  ',styles:["\n    .drop-zone {\n      margin: auto;\n      height: 100px;\n      border: 2px dotted #0782d0;\n      border-radius: 30px; }\n\n    .content {\n      color: #0782d0;\n      height: 100px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: center;\n          -ms-flex-pack: center;\n              justify-content: center;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center; }\n\n    .over {\n      background-color: rgba(147, 147, 147, 0.5); }\n  "]}]}],W.ctorParameters=function(){return[{type:e.NgZone}]},W.propDecorators={headertext:[{type:e.Input}],customstyle:[{type:e.Input}],onFileDrop:[{type:e.Output}],onFileOver:[{type:e.Output}],onFileLeave:[{type:e.Output}]};var Z=function(){return function(){}}();Z.decorators=[{type:e.NgModule,args:[{declarations:[W],exports:[W],imports:[],providers:[],bootstrap:[W]}]}],Z.ctorParameters=function(){return[]},t.FileComponent=W,t.FileDropModule=Z,t.UploadFile=q,t.UploadEvent=Y,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-file-drop.umd.min.js.map
